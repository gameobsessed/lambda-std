"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EventBridgeEventController = exports.EventBridgeEventControllerClass = void 0;
const controller_1 = require("./controller");
const error_handler_1 = require("./error-handler");
class EventBridgeEventControllerClass extends controller_1.EventControllerClass {
    getHandlerName(event) {
        return event['detail-type'];
    }
}
exports.EventBridgeEventControllerClass = EventBridgeEventControllerClass;
function EventBridgeEventController({ errorHandler = error_handler_1.defaultErrorHandler, } = {}) {
    return function EventBridgeEventController(UserControllerCtor) {
        const controller = new EventBridgeEventControllerClass(UserControllerCtor);
        const handler = controller.handle.bind(controller);
        return async function executeEventBridgeEventHandler(...args) {
            let result;
            try {
                result = await handler(...args);
            }
            catch (error) {
                return errorHandler(error);
            }
            return result;
        };
    };
}
exports.EventBridgeEventController = EventBridgeEventController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtYnJpZGdlLmpzIiwic291cmNlUm9vdCI6InNyYy8iLCJzb3VyY2VzIjpbImRlY29yYXRvcnMvY29udHJvbGxlcnMvZXZlbnQtYnJpZGdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLDZDQUF3RTtBQUN4RSxtREFBb0U7QUFFcEUsTUFBYSwrQkFBZ0MsU0FBUSxpQ0FFcEQ7SUFDQyxjQUFjLENBQUMsS0FBaUM7UUFDOUMsT0FBTyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDN0IsQ0FBQztDQUNGO0FBTkQsMEVBTUM7QUFNRCxTQUFnQiwwQkFBMEIsQ0FBQyxFQUN6QyxZQUFZLEdBQUcsbUNBQW1CLE1BQ0csRUFBRTtJQUN2QyxPQUFPLFNBQVMsMEJBQTBCLENBQ3hDLGtCQUF1QztRQUV2QyxNQUFNLFVBQVUsR0FBRyxJQUFJLCtCQUErQixDQUFDLGtCQUFrQixDQUFDLENBQUE7UUFDMUUsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFRLENBQUE7UUFFekQsT0FBTyxLQUFLLFVBQVUsOEJBQThCLENBQUMsR0FBRyxJQUFnQjtZQUN0RSxJQUFJLE1BQU0sQ0FBQTtZQUVWLElBQUk7Z0JBQ0YsTUFBTSxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUE7YUFDaEM7WUFBQyxPQUFPLEtBQUssRUFBRTtnQkFDZCxPQUFPLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUMzQjtZQUVELE9BQU8sTUFBTSxDQUFBO1FBQ2YsQ0FBUSxDQUFBO0lBQ1YsQ0FBQyxDQUFBO0FBQ0gsQ0FBQztBQXJCRCxnRUFxQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEJyaWRnZUV2ZW50IH0gZnJvbSAnYXdzLWxhbWJkYSdcbmltcG9ydCB7IEV2ZW50Q29udHJvbGxlckNsYXNzLCBJVXNlckNvbnRyb2xsZXJDdG9yIH0gZnJvbSAnLi9jb250cm9sbGVyJ1xuaW1wb3J0IHsgZGVmYXVsdEVycm9ySGFuZGxlciwgSUVycm9ySGFuZGxlciB9IGZyb20gJy4vZXJyb3ItaGFuZGxlcidcblxuZXhwb3J0IGNsYXNzIEV2ZW50QnJpZGdlRXZlbnRDb250cm9sbGVyQ2xhc3MgZXh0ZW5kcyBFdmVudENvbnRyb2xsZXJDbGFzczxcbiAgRXZlbnRCcmlkZ2VFdmVudDxzdHJpbmcsIGFueT5cbj4ge1xuICBnZXRIYW5kbGVyTmFtZShldmVudDogRXZlbnRCcmlkZ2VFdmVudDxhbnksIGFueT4pIHtcbiAgICByZXR1cm4gZXZlbnRbJ2RldGFpbC10eXBlJ11cbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFdmVudEJyaWRnZUV2ZW50Q29udHJvbGxlclBhcmFtcyB7XG4gIGVycm9ySGFuZGxlcj86IElFcnJvckhhbmRsZXI8YW55PlxufVxuXG5leHBvcnQgZnVuY3Rpb24gRXZlbnRCcmlkZ2VFdmVudENvbnRyb2xsZXIoe1xuICBlcnJvckhhbmRsZXIgPSBkZWZhdWx0RXJyb3JIYW5kbGVyLFxufTogSUV2ZW50QnJpZGdlRXZlbnRDb250cm9sbGVyUGFyYW1zID0ge30pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIEV2ZW50QnJpZGdlRXZlbnRDb250cm9sbGVyKFxuICAgIFVzZXJDb250cm9sbGVyQ3RvcjogSVVzZXJDb250cm9sbGVyQ3RvclxuICApIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEV2ZW50QnJpZGdlRXZlbnRDb250cm9sbGVyQ2xhc3MoVXNlckNvbnRyb2xsZXJDdG9yKVxuICAgIGNvbnN0IGhhbmRsZXIgPSBjb250cm9sbGVyLmhhbmRsZS5iaW5kKGNvbnRyb2xsZXIpIGFzIGFueVxuXG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVFdmVudEJyaWRnZUV2ZW50SGFuZGxlciguLi5hcmdzOiBbYW55LCBhbnldKSB7XG4gICAgICBsZXQgcmVzdWx0XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoLi4uYXJncylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvckhhbmRsZXIoZXJyb3IpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGFzIGFueVxuICB9XG59XG4iXX0=